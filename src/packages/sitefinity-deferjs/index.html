<!--
### Reason I added by default type="delayed" to all script things is because:  
- sf editors can place scripts anywhere on the page they line (any location, topm middle, bottom etc)
- you cannot control sitefinity's default script behavior, eg. adding type="delayed"

I basically had to force the default behavior of js on sf to respect the 'delayed' tag. 

### Reason for "delayed" instead of deferjs?
- because deferjs executes at its own time, i wanted to control when the js gets executed
- ...


-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="delayed">
      console.log(`delayed just ran`);
    </script>
  </head>
  <body>
    <!-- prettier-ignore -->
    <script id="defer-js">
        /*@shinsenter/defer.js@2.6.0*/
      !function(r,i,t){var u,o=/^data-(.+)/,a='IntersectionObserver',s='deferjs',n='load',e='pageshow',f='forEach',c='shift',l=/p/.test(i.readyState),d=[],h=d.slice;function m(e){i.head.appendChild(e)}function v(e,n){h.call(e.attributes)[f](n)}function p(e,n,t,o){return o=(n?i.getElementById(n):o)||i.createElement(e),n&&(o.id=n),t&&(o.onload=t),o}function y(e,n){return h.call((n||i).querySelectorAll(e))}function b(t,e){y('source',t)[f](b),v(t,function(e,n){(n=o.exec(e.name))&&(t[n[1]]=e.value)}),e&&(t.className+=' '+e),n in t&&t[n]()}function I(e){u(function(o){o=y(e||'[type=deferjs]'),function e(n,t){(n=o[c]())&&(n.parentNode.removeChild(n),(t=p(n.nodeName)).text=n.text,v(n,function(e){'type'!=e.name&&t.setAttribute(e.name,e.value)}),t.src&&!t.hasAttribute('async')?(t.onload=t.onerror=e,m(t)):(m(t),e()))}()})}(u=function(e,n){l?t(e,n):d.push(e,n)}).all=I,u.js=function(n,t,e,o){u(function(e){(e=p('SCRIPT',t,o)).src=n,m(e)},e)},u.css=function(n,t,e,o){u(function(e){(e=p('LINK',t,o)).rel='stylesheet',e.href=n,m(e)},e)},u.dom=function(e,n,t,o,i){function c(e){o&&!1===o(e)||b(e,t)}u(function(t){t=a in r&&new r[a](function(e){e[f](function(e,n){e.isIntersecting&&(n=e.target)&&(t.unobserve(n),c(n))})},i),y(e||'[data-src]')[f](function(e){s in e||(e[s]=1,t?t.observe(e):c(e))})},n)},u.reveal=b,r.Defer=u,r.addEventListener('on'+e in r?e:n,function(){for(I();d[0];t(d[c](),d[c]()))l=1})}(this,document,setTimeout);
    </script>

    <script type="deferjs">
      var array = [];
      array.push("npm/jquery@3.6.0");
      array.push("npm/popper.js@1.16.1");
      array.push("npm/bootstrap@4.6.0");
      array.push("npm/blazy@1.8.2");
      array.push("npm/waypoints@4.0.1/lib/noframework.waypoints.min.js");
      array.push("gh/osvaldasvalutis/disqusLoader.js/disqusloader.min.js");
      array.push("npm/@splidejs/splide@3.6.12/dist/js/splide.min.js");
      array.push("npm/lite-youtube-embed@0.2.0/src/lite-yt-embed.min.js");
      //console.log(`array`, array.join(","));

      window.Defer.js(
        `https://cdn.jsdelivr.net/combine/${array.join(",")}`,
        "cdnScripts",
        4000,
        () => {
          window.Defer.all('script[type="delayed"]');
        }
      );
    </script>
  </body>
</html>
